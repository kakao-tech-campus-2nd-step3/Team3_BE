<h1 align="center">ᱝ Splanet ᱝ</h1>

<div align="center" style="font-size:18px">
<b><i>Speak And Plan It!</i></b>
<br><br>
<b>🗓️ 내 목소리로 빛내는 나만의 플래너, Splanet 🗓️</b>  
</div>

<br>

<div align="center">
    <img src="https://github.com/user-attachments/assets/b773b8a7-26e9-4b55-a6d0-adba7ddd922f" width="500" alt="Splanet Landing GIF">
</div>
<br>

<div align="center">
    <b>Splanet:</b> <a href="https://www.splanet.co.kr" target="_blank"><b>https://www.splanet.co.kr</b></a>
</div>

<div align="center">
    <b>Medium Blog:</b> <a href="https://medium.com/@kanguk.ku/splanet-kakao-tech-campus-step3-66c6c9531eb7" target="_blank"><b>Link</b></a>
</div>

---

<div align="center">

## 📖 목차

| 항목 |
|------|
| [📌 소개](#-소개) |
| [🌟 주요 기능](#-주요-기능) |
| [💻 기술 스택](#-기술-스택) |
| [🛠 시스템 아키텍처](#-시스템-아키텍처) |
| [🗂️ 데이터베이스 ERD](#-데이터베이스-erd) |
| [🔍 모니터링](#-모니터링) |
| [🤖 AI 파인 튜닝](#-ai-파인-튜닝) |
| [🔗 개발 관련 블로그](#-개발-관련-블로그) |
| [👥 팀원](#-팀원) |

</div>

---

<div align="center">

## 🎨 소개

> *계획을 세우는 일 마저 계획인 여러분들께 선사합니다.*
<br>

**Splanet** 은 당신이 해야 할 일을 기반으로, 당신에게 맞는 일정표를 추천해드립니다.

<br>

복잡한 일정 관리 대신, **간편하고 직관적으로** 일정을 관리해 보세요. 

</div>

---

<div align="center">

## 🌟 주요 기능

### ✨️ 할 일 입력 (feat. 실시간 음성 인식) ✨  
사용자가 해야할 일을 입력합니다. 
<br>
목소리로 직접 말해보세요!

<table>
  <tr>
    <td align="center">
        <img src="https://github.com/user-attachments/assets/ff1b0823-4301-4298-a7c3-c3807cf8359d" alt="실시간 음성 인식" width="500">
        <br> 음성 인식을 통한 입력
    </td>
  </tr>
</table>

---

### ✨️ 플랜 자동 생성 ✨️  
사용자가 입력한 요구사항을 바탕으로 맞춤 플랜을 생성합니다. 
<br>
3가지의 추천 플랜 중 마음에 드는 것을 선택하세요!

<table>
  <tr>
    <td align="center"><img src="https://github.com/user-attachments/assets/f15ebce7-3675-4c0c-8653-6eba937f1ad8" alt="플랜 자동 생성" width="400"></td>
  </tr>
</table>

---

### ✨️ 플랜 관리 ✨️  
사용자는 드래그 앤 드롭 및 카드 크기 조절을 통해 플랜을 자유롭게 관리할 수 있습니다.

<table>
  <tr>
    <td align="center">
      <img src="https://github.com/user-attachments/assets/13ee292f-c20b-4fd1-bc4d-671b9efe2cf7" alt="플랜 관리 (드래그)" width="400">
      <br>드래그 앤 드롭
    </td>
    <td align="center">
      <img src="https://github.com/user-attachments/assets/1b595901-00cd-4cd9-a63d-1e9a09b0b6ea" alt="플랜 관리 (크기 조정)" width="400">
      <br>카드 크기 조절 및 완료
    </td>
  </tr>
</table>

---

### ✨️ 친구 관리 ✨️  
다른 사용자와 친구를 맺고 서로의 플랜을 공유하며 댓글을 남길 수 있습니다.

<table>
  <tr>
    <td align="center">
      <img src="https://github.com/user-attachments/assets/e1d9b351-f76f-44e9-94df-d6054674cbe2" alt="친구 관리 (요청, 검색, 수락)" width="400">
      <br>친구 목록 및 요청
    </td>
    <td align="center">
      <img src="https://github.com/user-attachments/assets/93ff0094-f9c8-4634-bc91-b0b18bad6cfe" alt="친구 플랜 (댓글)" width="400">
      <br>플랜 공유 및 댓글
    </td>
  </tr>
</table>

---

### ✨️ 웹 푸시 알림 ✨️  
웹 푸시 알림을 통해 일정 알림을 받을 수 있습니다.
(iOS 환경에서는 브라우저 → 홈 화면에 페이지 추가 이후 알림을 허용해야합니다.)

<table>
  <tr>
    <td align="center">
      <img src="https://github.com/user-attachments/assets/19d4e046-ca2d-41dc-b9eb-46a6adf2406d" alt="웹 푸시 알림 - 예시 1" width="400">
    </td>
    <td align="center">
      <img src="https://github.com/user-attachments/assets/59a8091b-5ae7-4b3f-8237-8f8a8ac7f924" alt="웹 푸시 알림 - 예시 2" width="400">
    </td>
  </tr>
</table>



<div align="center">

## 💻 기술 스택

| **분야**            | **사용 기술**                                                                                                           |
|---------------------|-------------------------------------------------------------------------------------------------------------------------|
| **Frontend**        | ![React](https://img.shields.io/badge/React-61DAFB?style=for-the-badge&logo=react&logoColor=white) ![Vite](https://img.shields.io/badge/Vite-646CFF?style=for-the-badge&logo=vite&logoColor=white) ![FullCalendar](https://img.shields.io/badge/FullCalendar-3A85FF?style=for-the-badge&logoColor=white) |
| **Backend**         | ![Java](https://img.shields.io/badge/Java-007396?style=for-the-badge&logo=java&logoColor=white) ![Spring Boot](https://img.shields.io/badge/Spring%20Boot-6DB33F?style=for-the-badge&logo=springboot&logoColor=white) |
| **Database**        | ![MySQL](https://img.shields.io/badge/MySQL-4479A1?style=for-the-badge&logo=mysql&logoColor=white) ![Redis](https://img.shields.io/badge/Redis-DC382D?style=for-the-badge&logo=redis&logoColor=white) ![AWS RDS](https://img.shields.io/badge/AWS%20RDS-527FFF?style=for-the-badge&logo=amazonrds&logoColor=white) |
| **Infrastructure**  | ![Amazon EC2](https://img.shields.io/badge/Amazon%20EC2-FF9900?style=for-the-badge&logo=amazonec2&logoColor=white) ![AWS ELB](https://img.shields.io/badge/AWS%20ELB-8a2be2?style=for-the-badge&logo=awselasticloadbalancer&logoColor=white) ![Docker Compose](https://img.shields.io/badge/Docker%20Compose-2496ED?style=for-the-badge&logo=docker&logoColor=white) |
| **Monitoring**      | ![Prometheus](https://img.shields.io/badge/Prometheus-E6522C?style=for-the-badge&logo=prometheus&logoColor=white) ![Grafana](https://img.shields.io/badge/Grafana-F46800?style=for-the-badge&logo=grafana&logoColor=white) ![AWS CloudWatch](https://img.shields.io/badge/AWS%20CloudWatch-FF4F8B?style=for-the-badge&logo=amazonaws&logoColor=white) |

</div>

---

<div align="center">

## 🛠 시스템 아키텍처

<div align="center">
    <img src="https://github.com/user-attachments/assets/a20fb80e-5a00-417c-b260-5cb52bbfb187" width="700" alt="System Architecture Diagram">
</div>

### 시스템 구성 요약


| 구성 요소          | 설명                                                                                                                                                                                                        |
|--------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **배포 링크**      | [프론트엔드 (Vercel 배포): https://www.splanet.co.kr](https://www.splanet.co.kr) <br> [백엔드 (EC2 배포): https://api.splanet.co.kr](https://api.splanet.co.kr)                                                       |
| **프론트엔드**     | 프론트엔드는 **Vercel에서 배포**되며, React와 Vite로 구성되어 있습니다.                                                                                                                                                         |
| **백엔드**         | 백엔드는 AWS EC2 인스턴스에서 Docker 컨테이너로 배포됩니다. <br/>**MySQL(Amazon RDS)** 와 연동하여 데이터를 관리하며, Redis를 통해 캐싱 및 토큰을 처리합니다.                                                                                            |
| **무중단 배포 (Blue-Green Deployment)** | **Elastic Load Balancer (ELB)** 를 사용하여 두 개의 백엔드 인스턴스(Blue와 Green)로 트래픽을 분산시켜 무중단 배포를 지원합니다. <br> 새로운 버전이 배포될 때, 먼저 하나의 서버 컨테이너가 업데이트되고, 이후 ELB를 통해 트래픽을 새 컨테이너로 전환하여 사용자에게 끊김 없는 서비스를 제공합니다. (다운타임 1초 미만) |
| **CI/CD 파이프라인** | GitHub Actions를 통해 자동화된 CI/CD 파이프라인을 구성하였으며, 코드 업데이트가 발생할 때마다 Vercel과 EC2에서 자동으로 빌드 및 배포가 이루어집니다. 이를 통해 개발과 배포 과정의 효율성을 높였습니다.                                                                            |

</div>

---

<div align="center">

## 🗂 데이터베이스 ERD

<div align="center">
    <img src="https://github.com/user-attachments/assets/ff018cd5-6c0d-42e1-bca1-792e4613d9bd" width="700" alt="ERD Diagram">
</div>

### 테이블 설명

| 테이블                    | 설명                                                                                |
|---------------------------|-----------------------------------------------------------------------------------|
| **User**                  | 사용자 정보(`nickname`, `profile_image`, `kakao_id` 등)를 저장합니다.                         |
| **친구 관계**             | `friend`와 `friend_request` 테이블을 통해 사용자 간 친구 관계를 관리합니다.                            |
| **팀**                    | `team`, `team_user_relation`, `team_invitation` 테이블을 통해 사용자의 팀 생성, 가입, 역할을 관리합니다. |
| **FCM 토큰**              | `fcm_token` 테이블로 푸시 알림 토큰을 관리하고, 알림 로그는 `notification_log` 테이블에 저장됩니다.            |
| **계획(Plan)**            | `plan` 테이블은 개인 계획을, `team_plan` 테이블은 팀 내 계획을 관리하며, 계획 정보와 완료 여부를 기록합니다.           |
| **구독(Subscription)**    | `subscription` 테이블은 사용자의 구독 상태를, `payment` 테이블은 구독 결제 내역을 기록합니다.                  |
| **댓글(Comment)**         | `comment` 테이블에서 각 `user`에 작성된 댓글을 관리하며, 작성자와 유저 ID를 연결합니다.                        |

</div>

---

<div align="center">

## 🔍 모니터링

<img src="https://github.com/user-attachments/assets/1d0af14f-37dd-4948-8d4a-67546c34923a" width="700" alt="Monitoring Diagram">

[🔍 모니터링 🔍](https://monitoring.splanet.co.kr/d/fe38bkz9ydkowa/8-splanet?from=now-7d&to=now&timezone=browser)

#### 👀 Viewer Account 👀
> **ID**: splanet  
> **PW**: splanet3
>

`Amazon CloudWatch`를 활용하여 시스템 성능을 모니터링하고, Log 그룹과 사용자 정의 Log를 생성해 서비스 상태와 오류 로그를 관리합니다.

`Docker Compose`를 통해 웹 애플리케이션을 구성하며, 각 컨테이너의 내부 로그를 외부 파일로 동기화하여 **실시간 로그 수집**이 가능합니다.

`Grafana`와 `Prometheus`를 결합하여 시각화된 대시보드를 제공하고, 애플리케이션 및 인프라스트럭처의 다양한 메트릭을 **실시간으로 모니터링**합니다.

이를 통해 **CPU 사용량**, **메모리 사용량**, **네트워크 트래픽**, **요청 수** 등 주요 성능 지표를 직관적으로 파악할 수 있습니다.

이러한 **모니터링 및 로그 관리 시스템**을 통해 시스템 안정성과 서비스 가용성을 높였습니다.


</div>

<div align="center">

### 각 항목 설명

| 항목                     | 설명                                                                 |
|--------------------------|----------------------------------------------------------------------|
| **MAU (Monthly Active Users)** | 최근 30일간의 월간 활성 사용자 수를 나타냅니다.    |
| **DAU (Daily Active Users)** | 최근 7일간의 일간 활성 사용자 수를 나타냅니다.              |
| **상태코드 지표**           | 1시간 기준으로 성공 요청(success_requests), 클라이언트 에러(client_error_requests), 리디렉션 요청(redirect_requests)의 비율을 나타냅니다. |
| **동시 접속수**             | 최근 24시간 동안의 동시 접속 사용자 수를 표시합니다.                            |
| **DB Connections**         | 데이터베이스 연결 상태를 나타냅니다. 특정 시간대에 연결 수가 증가하는 패턴을 보여줍니다. |
| **DB 빈 공간**             | RDS의 **FreeStorageSpace** 지표로, 데이터베이스 인스턴스의 사용 가능한 저장 공간을 나타냅니다. |
| **CPU 사용량**             | 시스템의 CPU 사용량을 나타내며, 시간대별 CPU 사용률 변화를 보여줍니다.              |
| **네트워크 요청/수신**      | 네트워크 요청 수와 수신된 데이터를 시간대별로 나타내며, 요청 수의 변화를 시각적으로 제공합니다. |
| **Request Count**          | API 요청 수를 나타냅니다. 최근 요청 수의 변화를 보여주는 그래프입니다.              |
| **초당 읽기/쓰기 작업 수**  | 시스템에서 초당 읽기 및 쓰기 작업 수를 보여줍니다.  |
| **경로별 요청 수**         | 각 API 경로별로 요청 수를 나타내며, 가장 많이 호출된 경로 순으로 정렬됩니다. ) |

</div>

---

<div align="center">

## 🤖 AI 파인 튜닝

>Splanet은 OpenAI API를 활용하여 `chatGPT 4o mini` 모델을 기반으로 한 지능형 일정 관리 기능을 제공합니다.
>
>JSONL 형식의 학습 데이터를 사용하여 모델을 사용자 요구사항과 컨텍스트에 맞게 **fine-tunning** 을 진행하였습니다. 
>

</div>

<details>
<summary> JSONL 학습 데이터 형식</summary>

### 예시 입력

```json
{
  "messages": [
    {
      "role": "user",
      "content": "\"오늘 22시에 약속 있음\" 제공된 가이드라인을 따르지 않으면 페널티가 부과될 것입니다. 모든 지침을 주의깊게 읽고 그에 따라 행동하세요. (기존 startDate와 endDate사이에 일정을 생성하지 말아줘. 기존 startDate, endDate:[{\"startDate\": \"2024-11-13T18:30:00\", \"endDate\": \"2024-11-13T20:30:00\"}] 현재 시간 이후로 여유 있게 모든 일정을 완수할 수 있도록 계획해줘 . 시험이나 과제가 포함된 경우, 시험 당일이나 제출 당일이 아닌 전날까지 준비가 완료되도록 해줘 현재 시간:  (2024-11-13T20:41:00 기준). 모든 일정은 한국 시간(UTC+9)을 기준으로 설정해줘. 또한, 기존 일정을 생각하고 새로운 일정을 적당한 간격을 두고 배치해줘.)"
    },
    {
      "role": "assistant",
      "content": "{\"deviceId\": \"<USER_DEVICE_ID>\", \"groupId\": <GROUP_ID>, \"planCards\": [{\"title\": \"약속\", \"description\": \"오늘 22시에 시작하는 약속\", \"startDate\": \"2024-11-13T22:00:00\", \"endDate\": \"2024-11-13T23:00:00\", \"accessibility\": true, \"isCompleted\": false}]}"
    }
  ]
}
```

### 주요 구성 요소
1. **사용자 입력 (Role: `user`)**
   - 사용자가 모델에 제공하는 프롬프트나 지시사항을 포함합니다.
   - 일정 충돌 방지, 준비 마감 기한 등 구체적인 제약 조건을 포함합니다.

2. **모델 응답 (Role: `assistant`)**
   - 파인 튜닝된 모델의 JSON 형식 응답을 포함합니다.
   - 예시 응답:
     - `deviceId`: 사용자의 기기 식별자.
     - `groupId`: 관련 그룹의 식별자(있는 경우).
     - `planCards`: 일정 객체 배열로 구성.
       - `title`: 이벤트 제목.
       - `description`: 이벤트 설명.
       - `startDate`: ISO 8601 형식의 이벤트 시작 시간.
       - `endDate`: ISO 8601 형식의 이벤트 종료 시간.
       - `accessibility`: 이벤트 접근 가능 여부.
       - `isCompleted`: 이벤트 완료 여부.

</details>

---

<details>
<summary> 파인 튜닝 가이드라인</summary>

1. **학습 데이터 준비**
   - 프롬프트와 응답이 JSONL 형식을 따르도록 보장합니다.
   - 일정 충돌, 준비 마감 기한 등 다양한 사용자 시나리오를 포함하여 테스트합니다.

2. **모델 파인 튜닝**
   - 준비된 JSONL 데이터셋을 사용하여 OpenAI의 파인 튜닝 API로 학습시킵니다.

3. **테스트 및 검증**
   - 모델 응답을 검증하여 원하는 일정 관리 논리와 제약 조건에 부합하는지 확인합니다.

</details>

---

<details>
<summary>응답 예시</summary>

#### 응답 예시
```json
{
  "deviceId": "<USER_DEVICE_ID>",
  "groupId": "<GROUP_ID>",
  "planCards": [
    {
      "title": "약속",
      "description": "22시에 약속 나가기",
      "startDate": "2024-11-13T22:00:00",
      "endDate": "2024-11-13T23:00:00",
      "accessibility": true,
      "isCompleted": false
    }
  ]
}
```

#### 파인 튜닝 방법
1. JSONL 형식으로 학습 데이터를 생성합니다.
2. OpenAI의 파인 튜닝 API를 사용하여 모델을 학습시킵니다.
3. 모델을 배포하고 일정 관리 애플리케이션에 통합합니다.

</details>

---

위 과정을 통해 Splanet 향상된 일정 관리 기능을 제공할 수 있는 최적화된 파인 튜닝 모델을 구축할 수 있습니다.

---

<div align="center">

## 🔗 개발 관련 블로그

| 설명 | 링크 | 설명 | 링크 |
| --- | --- | --- | --- |
| 웹 푸시 알림 - 스케줄링 쿼리 최적화 | [Blog](https://kanguk-room.notion.site/12c036cad7a88073b0a0e1098775c723?pvs=4) | GPT Model Fine-Tuning 과정 | [Blog](https://cobalt-macaroni-f0a.notion.site/Splanet-Fine-Tuning-12be61e098d78092ad05f9addeed7ea4?pvs=4) |
| CLOVA Speech 실시간 스트리밍 | [Blog](https://kanguk-room.notion.site/STT-CLOVA-Speech-API-123036cad7a88098b644c957f8420080?pvs=4) | 모니터링 | [Blog](https://cobalt-macaroni-f0a.notion.site/Prometheus-Grafana-134e61e098d7804da8e6ef7fcdec80f2?pvs=4) |
| Redis 사용기 | [Blog](https://medium.com/@kanguk.ku/redis-%EC%82%AC%EC%9A%A9%EA%B8%B0-4fd3695ab0c7) | 무중단 배포 구현 | [Blog](https://kanguk-room.notion.site/132036cad7a880e68d7bd8846b25f8a6?pvs=4) |

 **전체적인 내용을 담은 Medium**  [Medium](https://medium.com/@kanguk.ku/splanet-kakao-tech-campus-step3-66c6c9531eb7)

</div>

---

<div align="center">

## 👥 팀원

<table width="950px">
    <thead>
    </thead>
    <tr>
        <th>Picture</th>
        <td align="center"><a href="https://github.com/kimsongmok"><img src="https://avatars.githubusercontent.com/u/51540711?v=4" width="60" height="60" alt="이름1"></a></td>
        <td align="center"><a href="https://github.com/kanguk01"><img src="https://avatars.githubusercontent.com/u/85006156?v=4" width="60" height="60" alt="이름2"></a></td>
        <td align="center"><a href="https://github.com/ez23re"><img src="https://avatars.githubusercontent.com/u/150822430?v=4" width="60" height="60" alt="이름3"></a></td>
        <td align="center"><a href="https://github.com/HeHelee"><img src="https://avatars.githubusercontent.com/u/119719994?v=4" width="60" height="60" alt="이름4"></a></td>
        <td align="center"><a href="https://github.com/faddishcorn"><img src="https://avatars.githubusercontent.com/u/158819969?v=4" width="60" height="60" alt="이름5"></a></td>
    </tr>
    <tr>
        <th>Name</th>
        <td align="center">김송목</td>
        <td align="center">이강욱</td>
        <td align="center">이세진</td>
        <td align="center">구희원</td>
        <td align="center">조중현</td>
    </tr>
    <tr>
        <th>Position</th>
        <td align="center"><b>Leader</b><br>Backend<br>DevOps<br>ML</td>
        <td align="center"><b>Tech Leader</b><br>Backend<br>DevOps</td>
        <td align="center"><b>Plan Leader</b><br>Backend</td>
        <td align="center"><b>Reminder</b><br>Frontend</td>
        <td align="center"><b>Planner</b><br>Frontend</td>
    </tr>
    <tr>
        <th>GitHub</th>
        <td align="center"><a href="https://github.com/kimsongmok"><img src="http://img.shields.io/badge/kimsongmok-green?style=social&logo=github"/></a></td>
        <td align="center"><a href="https://github.com/kanguk01"><img src="http://img.shields.io/badge/kanguk01-green?style=social&logo=github"/></a></td>
        <td align="center"><a href="https://github.com/ez23re"><img src="http://img.shields.io/badge/ez23re-green?style=social&logo=github"/></a></td>
        <td align="center"><a href="https://github.com/HeHelee"><img src="http://img.shields.io/badge/HeHelee-green?style=social&logo=github"/></a></td>
        <td align="center"><a href="https://github.com/faddishcorn"><img src="http://img.shields.io/badge/faddishcorn-green?style=social&logo=github"/></a></td>
    </tr>
</table>

</div>
